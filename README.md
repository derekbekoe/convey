<p align="center">
    <?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="50%" height="50%" viewBox="0 0 2168 581" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"><g><rect x="0" y="0" width="45.996" height="563.086" style="fill:#6c63ff;fill-rule:nonzero;"/><path d="M554.28,381.016c-6,8.4 -12.6,14.4 -25.2,24.6c-21.6,16.2 -51.6,24.6 -83.4,24.6c-79.2,0 -131.4,-59.4 -131.4,-149.4c0,-90.6 51,-147.6 131.4,-147.6c25.2,0 48.6,4.2 67.8,16.2c15.6,9.6 25.8,19.2 34.8,31.8l10.8,-10.2c-9,-11.4 -21,-21.6 -34.8,-30.6c-22.2,-13.8 -48.6,-19.8 -78,-19.8c-88.8,0 -145.8,63 -145.8,160.2c0,96 59.4,162 145.2,162c36,0 69.6,-10.8 95.4,-31.2c9,-7.2 16.2,-13.8 22.8,-21l-9.6,-9.6Z" style="fill:#6c63ff;fill-rule:nonzero;"/><path d="M760.68,118.816c-84.6,0 -139.8,63.6 -139.8,161.4c0,96.6 56.4,162.6 139.8,162.6c84.6,0 139.8,-63.6 139.8,-161.4c0,-96.6 -56.4,-162.6 -139.8,-162.6Zm0,311.4c-76.8,0 -126,-59.4 -126,-150c0,-91.2 48.6,-148.8 126,-148.8c76.8,0 126,59.4 126,150c0,91.2 -48.6,148.8 -126,148.8Z" style="fill:#6c63ff;fill-rule:nonzero;"/><path d="M1235.88,436.816c-1.2,-13.2 -1.8,-25.2 -1.8,-45l0,-157.8c0,-73.2 -40.8,-115.2 -111,-115.2c-57,0 -100.8,30 -117.6,76.2l-1.8,0c1.8,-13.8 2.4,-31.2 2.4,-45l0,-25.2l-15.6,0c1.2,12.6 1.8,24 1.8,45l0,222c0,20.4 -0.6,32.4 -1.8,45l17.4,0c-1.2,-12.6 -1.8,-24.6 -1.8,-45l0,-153c0,-63 46.8,-106.8 115.8,-107.4c64.2,0 98.4,37.2 98.4,106.2l0,154.2c0,19.8 -0.6,31.8 -1.8,45l17.4,0Z" style="fill:#6c63ff;fill-rule:nonzero;"/><path d="M1540.08,124.816c-3,10.8 -6.6,21.6 -16.2,45l-84.6,212.4c-7.2,18 -10.2,26.4 -13.8,37.2c-3.6,-10.8 -8.4,-23.4 -13.8,-37.2l-84.6,-212.4c-9.6,-23.4 -13.2,-34.2 -16.2,-45l-18,0c6,11.4 10.8,22.8 19.8,45l88.2,222c7.8,19.8 12,32.4 15,45l19.2,0c3,-12.6 7.2,-25.2 15,-45l88.2,-222c10.2,-25.2 14.4,-34.8 19.8,-45l-18,0Z" style="fill:#6c63ff;fill-rule:nonzero;"/><path d="M1864.68,276.016l0,-10.8c0,-94.8 -47.4,-148.2 -131.4,-148.2c-88.2,0 -142.2,61.2 -142.2,162c0,97.2 60,163.8 147,163.8c36.6,0 70.8,-11.4 96,-31.8c7.8,-6 17.4,-15 22.8,-21.6l-9.6,-9c-6.6,9 -14.4,16.8 -24,24c-22.8,16.8 -53.4,25.8 -85.2,25.8c-80.4,0 -133.2,-60 -133.2,-151.2l0,-3l259.8,0Zm-259.2,-12c4.8,-84 52.2,-134.4 127.2,-134.4c76.2,0 118.2,48 118.2,134.4l-245.4,0Z" style="fill:#6c63ff;fill-rule:nonzero;"/><path d="M2149.08,124.816c-3,11.4 -7.2,24 -15.6,45l-98.4,247.8l-99,-247.8c-9.6,-23.4 -13.2,-34.2 -16.2,-45l-19.2,0c6,10.2 13.2,26.4 20.4,45l106.2,267l-7.8,19.8c-36,90 -55.8,111.6 -100.2,111.6c-13.8,0 -27,-3.6 -39,-10.8l-3.6,14.4c11.4,6 25.8,9 40.2,9c51.6,0 78,-26.4 116.4,-122.4l114,-288.6c10.2,-25.2 14.4,-34.8 19.8,-45l-18,0Z" style="fill:#6c63ff;fill-rule:nonzero;"/></g></svg>
</p>
<p align="center">
<a href="https://github.com/derekbekoe/convey/releases"><img src="https://img.shields.io/github/release/derekbekoe/convey.svg" alt="Version"></a>
<a href="https://travis-ci.org/derekbekoe/convey"><img src="https://travis-ci.org/derekbekoe/convey.svg?branch=master" alt="Build Status"></a>
</p>
<p align="center">
A command-line tool that makes sharing pipes between machines easy.
</p>


```bash
echo "Hello world" | convey
21f50fba373e11e9990a72000872a940
```
```bash
convey 21f50fba373e11e9990a72000872a940
Hello world
```

# Features

- Pipe between hosts with an idomatic interface using the standard `|` symbol.
- Easily pipe files between hosts.
- Does not require any open ports between your clients.
- Supports colors through [ANSI escape codes](https://en.wikipedia.org/wiki/ANSI_escape_code#Colors).
- Supports Linux, macOS and Windows.
- No dependencies to install.
- Powered by [NATS](https://nats.io/), a CNCF project.

Read more at [Convey: Pipe between machines](https://blog.derekbekoe.com/convey)

# Getting Started

### Linux
```bash
wget -qO convey https://get.convey.sh/linux
chmod +x ~/bin/convey
~/bin/convey -h
```

### macOS
```bash
wget -qO ~/bin/convey https://get.convey.sh/macos
chmod +x ~/bin/convey
~/bin/convey -h
```

### Windows  
```powershell
Invoke-WebRequest https://get.convey.sh/windows -OutFile convey.exe
convey -h
```

### Go
```bash
go get github.com/derekbekoe/convey
```

# Configuration

Set configuration with the `convey configure` command.
```bash
convey configure --nats-url nats://localhost:4222 --nats-cluster test-cluster
```

By default, configuration is loaded from `$HOME/.convey.yaml`.

This is an example of `.convey.yaml`:
```yaml
NatsURL: nats://localhost:4223
NatsClusterID: test-cluster
```

Use the `--config` flag on the command line to change the config file used if needed.

# NATS Streaming Server

You can host your own [NATS Streaming Server](https://nats.io/documentation/streaming/nats-streaming-intro/) and configure `convey` to use that server.

**Deploy to a local Docker container**

```bash
docker run -p 4222:4222 nats-streaming:linux
convey configure --nats-url nats://localhost:4222 --nats-cluster test-cluster
```

**Deploy to an Azure Container Instance**

note: We only include this as an illustration to keep the command simple as traffic is not encrypted.
```bash
az container create --image nats-streaming:linux --ports 4222 --ip-address Public -g <RG> -n nats1
convey configure --nats-url nats://<IPADDRESS>:4222 --nats-cluster test-cluster
```

**TLS**

```bash
openssl req -x509 -nodes -days 3650 -newkey rsa:2048 -keyout certs/key.pem -out certs/cert.pem -subj "/C=US/ST=Texas/L=Austin/O=AwesomeThings/CN=localhost"
```

```bash
cd /Users/derekb/go/src/github.com/derekbekoe/convey
docker run -p 4222:4222 -v $(pwd)/certs:/certs nats-streaming:linux -tls_client_cert /certs/cert.pem -tls_client_key /certs/key.pem  --tlscert /certs/cert.pem --tlskey /certs/key.pem --tlsverify=false --tls=false -secure=false
```

# Development

**Set up**
```bash
go get -u github.com/derekbekoe/convey
cd $GOPATH/src/github.com/derekbekoe/convey
go run main.go
```

**Multi-platform Builds**
```bash
go get github.com/mitchellh/gox
gox -ldflags "-X github.com/derekbekoe/convey/cmd.VersionGitCommit=$(git rev-list -1 HEAD) -X github.com/derekbekoe/convey/cmd.VersionGitTag=VERSION" -os="linux darwin" -arch="amd64" -output="bin/{{.Dir}}_{{.OS}}_{{.Arch}}"
```
See https://golang.org/doc/install/source#environment

# Examples

Click to expand.

<div style="text-align: center">
<img src="https://derekb.blob.core.windows.net/public/blog_convey_vm_1_top.gif" alt="Convey with Top" border="0" width="445">
<img src="https://derekb.blob.core.windows.net/public/blog_convey_vm_1_filecp.gif" alt="Convey for file piping" border="0" width="445">
<img src="https://derekb.blob.core.windows.net/public/blog_convey_vm_1_ms.gif" alt="Convey with millisecond date" border="0" width="445">
<img src="https://derekb.blob.core.windows.net/public/blog_convey_cloudshell_1.gif" alt="Convey with Cloud Shell" border="0" width="445">
</div>

# License

Convey source code is available under the [MIT License](LICENSE).
